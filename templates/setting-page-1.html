<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global_.css" />
    <link rel="stylesheet" href="./setting-page-1.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap"
    />
  </head>
  <body>
    <div class="setting-page-1">
      <div class="content3"></div>
      <header class="header6">
        <div class="header-child6"></div>
        <div class="header-child7"></div>
        <div class="header-inner3">
          <div class="banque-de-lagriculture-et-du-parent">
            <img
              class="banque-de-lagriculture-et-du-icon7"
              loading="lazy"
              alt=""
              src="./public/banque-de-lagriculture-et-du-dveloppement-ruralsvg-11@2x.png"
            />
            <a
              class="badr-bank5"
              href="file:///C:/Users/dell/Desktop/bank-sys-test-main/templates/main-dashboard.html"
            >
              Badr Bank
            </a>
          </div>
        </div>
        <div class="frame-parent36">
          <div class="setting-wrapper">
            <a class="setting7">Setting</a>
          </div>
          <div class="search-bar2">
            <div class="logo-container1">
              <div class="rectangle-parent81">
                <div class="frame-child134"></div>
                <img
                  class="magnifying-glass-1-icon7"
                  alt=""
                  src="./public/magnifyingglass-1.svg"
                />
                <div class="search-for-something-frame">
                  <a class="search-for-something7">Search for something</a>
                </div>
              </div>
            </div>
            <div class="search-bar-inner">
              <img
                class="frame-child135"
                loading="lazy"
                alt=""
                src="./public/group-4.svg"
              />
            </div>
            <div class="search-bar-child">
              <img
                class="frame-child136"
                loading="lazy"
                alt=""
                src="./public/group-3.svg"
              />
            </div>
            <img
              class="mask-group-icon10"
              loading="lazy"
              alt=""
              src="./public/mask-group@2x.png"
            />
          </div>
        </div>
      </header>
      <main class="navbar">
        <div class="navbar-background-parent">
          <div class="navbar-background"></div>
          <div class="frame-wrapper56">
            <div class="menu-icons-parent">
              <div class="menu-icons7">
                <img
                  class="home-2-icon7"
                  loading="lazy"
                  alt=""
                  src="./public/home-2.svg"
                />
                <img
                  class="transfer-1-icon7"
                  loading="lazy"
                  alt=""
                  src="./public/transfer-1.svg"
                />
                <img
                  class="user-3-17"
                  loading="lazy"
                  alt=""
                  src="./public/user-3-11.svg"
                />
                <img
                  class="economic-investment-1-icon7"
                  loading="lazy"
                  alt=""
                  src="./public/economicinvestment-1.svg"
                />
                <img
                  class="credit-card-1-icon10"
                  loading="lazy"
                  alt=""
                  src="./public/creditcard-1.svg"
                />
                <div class="financial-goals-title">
                  <img
                    class="loan-1-icon7"
                    loading="lazy"
                    alt=""
                    src="./public/loan-1.svg"
                  />
                </div>
                <div class="redeem-button">
                  <img
                    class="service-1-icon7"
                    loading="lazy"
                    alt=""
                    src="./public/service-1.svg"
                  />
                </div>
                <div class="calculator-button">
                  <img
                    class="econometrics-1-icon7"
                    loading="lazy"
                    alt=""
                    src="./public/econometrics-1.svg"
                  />
                </div>
                <div class="profile-name-button">
                  <img
                    class="settings-solid-17"
                    loading="lazy"
                    alt=""
                    src="./public/settings-solid-11.svg"
                  />
                </div>
              </div>
              <div class="rewards-header">
                <div class="page-title1">
                  <a class="dashboard9">Dashboard</a>
                  <div class="transactions21">Transactions</div>
                  <a class="accounts9">Accounts</a>
                  <div class="investments9">Investments</div>
                  <div class="credit-cards9">Credit Cards</div>
                  <div class="loans8">Loans</div>
                  <a class="services9">Services</a>
                  <div class="my-privileges7">My Privileges</div>
                  <a class="setting8">Setting</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <section class="profile-background-parent">
          <footer class="profile-background"></footer>
          <div class="rectangle-parent82">
            <div class="frame-child137"></div>
            <div class="frame-child138"></div>
            <div class="frame-parent37">
              <div class="edit-options-wrapper">
                <div class="edit-options">
                  <div class="edit-profile">Edit Profile</div>
                  <a href="C:\Users\ACER\Desktop\BANK-main\templates\setting-page-2.html" class="preferences">Preferences</a>

                  <a href="C:\Users\ACER\Desktop\BANK-main\templates\setting-page-3.html" class="security">Security</a>
                </div>
              </div>
              <div class="frame-child139"></div>
            </div>
            <div class="frame-child140"></div>
            <div class="profile-details">
              <div class="profile-details-inner">
                <!-- Profile picture -->
                <img
                  id="profileImage"
                  class="frame-child141"
                  loading="lazy"
                  alt="Profile Picture"
                  src="./public/group-206@2x.png"
                  onclick="document.getElementById('profilePicture').click();" 
                  style="cursor: pointer;"
                />
                <input
                  type="file"
                  id="profilePicture"
                  name="profile_picture"
                  style="display: none;"
                  accept="image/*"
                />
              </div>
              <form
                class="personal-info" id="profileForm"
              >
                <div class="personal-info-fields">
                  <div class="personal-info-field-labels">
                    <div class="your-name">First Name</div>
                    <div class="rectangle-parent83">
                      <div class="frame-child142"></div>
                      <input
                        class="charlene-reed"
                        placeholder="enter your First name"
                        type="text"
                        name="first_name"
                      />
                    </div>
                  </div>
                  <div class="edit-profile-button">
                    <a class="email">ID</a>
                    <div class="rectangle-parent84">
                      <div class="frame-child143"></div>
                      <input
                        class="charlenereedgmailcom"
                        placeholder="enter your id"
                        type="text"
                        name="id_cust"
                      />
                    </div>
                     <div class="account-info-field-labels2">
                    <div class="present-address">Email</div>
                    <div class="rectangle-parent90">
                      <div class="frame-child149"></div>
                      <input
                        class="san-jose-california1"
                        placeholder="exemple@gmail.com"
                        type="email"
                        name="email_address"
                      />
                    </div>
                  </div>
                  </div>
                  <div class="personal-info-field-labels1">
                    <div class="date-of-birth">Date of Birth</div>
                    <div class="rectangle-parent85">
                      <div class="frame-child144"></div>
                      <input
                        class="january-1990"
                        placeholder="enter your date of birth"
                        type="date"
                        name="date_of_birth"
                      />
                      <div class="name-icon-wrapper">
                        <img
                          class="name-icon"
                          alt=""
                          src="./public/calendar.svg"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="personal-info-field-labels2">
                    <div class="permanent-address">NiN CUST</div>
                    <div class="rectangle-parent86">
                      <div class="frame-child145"></div>
                      <input
                        class="san-jose-california"
                        placeholder="enter your NiN CUST"
                        type="text"
                        name="NIN_cust"
                      />
                    </div>
                  </div>
                </div>
                <div class="account-info-fields">
                  <div class="account-info-field-labels">
                    <a class="user-name">Last Name</a>
                    <div class="rectangle-parent88">
                      <div class="frame-child147"></div>
                      <input
                        class="charlene-reed1"
                        placeholder="enter your Last name"
                        type="text"
                        name="last_name"
                      />
                    </div>
                  </div>
                  <div class="account-info-field-labels1">
                    <div class="password">Password</div>
                    <div class="rectangle-parent89">
                      <div class="frame-child148"></div>
                      <input
                        class="input1"
                        placeholder="**********"
                        type="password"
                        name="password"
                      />
                    </div>
                  </div>
                  <div class="account-info-field-labels2">
                    <div class="present-address">Present Address</div>
                    <div class="rectangle-parent90">
                      <div class="frame-child149"></div>
                      <input
                        class="san-jose-california1"
                        placeholder="enter your adresse"
                        type="text"
                        name="address"
                      />
                    </div>
                  </div>
                  <div class="account-info-field-labels3">
                    <div class="city">Phone Number</div>
                    <div class="rectangle-parent91">
                      <div class="frame-child150"></div>
                      <input
                        class="san-jose"
                        placeholder="enter your Phone Number"
                        type="text"
                        name="phone_number"
                      />
                    </div>
                  </div>
                  <div class="account-info-field-labels4">
                    <div class="country">RIB CUST</div>
                    <div class="rectangle-parent92">
                      <div class="frame-child151"></div>
                      <input
                        class="usa"
                        placeholder="enter your RIB CUST"
                        type="text"
                        name="Rib_cust"
                      />
                    </div>
                  </div>
                  <button class="rectangle-parent93" type="submit">
                    <div class="frame-child152"></div>
                    <div class="save">Save</div>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>
      </main>
      <div class="separator4"></div>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          // Handle profile picture change
          document.getElementById("profilePicture").addEventListener("change", function () {
            const profilePictureInput = this;
            if (profilePictureInput.files && profilePictureInput.files[0]) {
              const reader = new FileReader();
              reader.onload = function (e) {
                document.getElementById("profileImage").src = e.target.result;
              };
              reader.readAsDataURL(profilePictureInput.files[0]);
            }
          });
        
          // Handle form submission
          document.getElementById("profileForm").addEventListener("submit", async function (event) {
            event.preventDefault();
        
            const formData = new FormData(this);
        
            try {
              const response = await fetch("http://127.0.0.1:5000/update-profile", {  // i got error in this line
                method: "POST",
                body: formData,
                credentials: 'include'  // Include cookies with the request to maintain session
              });
        
              const result = await response.json();
        
              if (response.ok) {
                alert("Profile updated successfully!");
              } else {
                console.log("Error response:", result);
                alert("Error updating profile: " + (result.message || result.error || "Unexpected error occurred"));
              }
            } catch (error) {
              console.error("An error occurred:", error); // and error in this line
              alert("An error occurred: " + error.message);
            }
          });
        
          // Trigger file input click on image click
          document.getElementById("profileImage").addEventListener("click", function () {
            document.getElementById("profilePicture").click();
          });
        });
        </script>
         
    </div>
  </body>
</html>
